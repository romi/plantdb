<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Local file system database &#8212; plantdb  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=83e35b93" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css?v=79c92029" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css?v=2a6c4383" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css?v=45cf7dbc" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css?v=d290406d" />
    <link rel="stylesheet" type="text/css" href="../_static/_static/css/extra.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <link rel="icon" href="../_static/ROMI_favicon_green.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="plantdb.fsdb.FSDB" href="autosummary/plantdb.fsdb.FSDB.html" />
    <link rel="prev" title="Abstract database class" href="db.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=green data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#reference/fsdb" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="plantdb  documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">plantdb</span>
          <span class="md-header-nav__topic"> Local file system database </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/romi/plantdb/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">plantdb</a></li>
          <li class="md-tabs__item"><a href="../reference.html" class="md-tabs__link">Reference API</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="plantdb documentation" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="plantdb documentation">plantdb</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/romi/plantdb/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
    </div>
  
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#reference-fsdb--page-root" class="md-nav__link">Local file system database</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#classes" class="md-nav__link">Classes</a>
        </li>
        <li class="md-nav__item"><a href="#methods" class="md-nav__link">Methods</a>
        </li>
        <li class="md-nav__item"><a href="#module-plantdb.fsdb" class="md-nav__link">Details</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.basedir" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.basedir</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.lock_path" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.lock_path</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.scans" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.scans</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.is_connected" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.is_connected</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.connect" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.connect()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.create_scan" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.create_scan()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.delete_scan" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.delete_scan()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.disconnect" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.disconnect()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.get_scan" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.get_scan()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.get_scans" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.get_scans()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.list_scans" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.list_scans()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FSDB.path" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FSDB.path()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.db" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.db</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.fileset" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.fileset</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.id" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.id</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.filename" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.filename</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.metadata</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.get_metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.get_metadata()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.import_file" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.import_file()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.path" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.path()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.read" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.read()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.read_raw" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.read_raw()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.set_metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.set_metadata()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.store" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.store()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.write" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.write()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.File.write_raw" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">File.write_raw()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FileNoFileNameError" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FileNoFileNameError</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FileNoIDError" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FileNoIDError</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.db" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.db</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.id" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.id</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.scan" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.scan</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.metadata</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.files" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.files</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.create_file" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.create_file()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.delete_file" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.delete_file()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.get_file" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.get_file()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.get_files" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.get_files()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.get_metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.get_metadata()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.list_files" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.list_files()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.path" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.path()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.set_metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.set_metadata()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Fileset.store" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Fileset.store()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FilesetNoIDError" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FilesetNoIDError</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.FilesetNotFoundError" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FilesetNotFoundError</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.LOCK_FILE_NAME" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">LOCK_FILE_NAME</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.MARKER_FILE_NAME" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MARKER_FILE_NAME</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.db" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.db</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.id" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.id</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.metadata</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.filesets" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.filesets</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.create_fileset" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.create_fileset()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.delete_fileset" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.delete_fileset()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.get_fileset" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.get_fileset()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.get_filesets" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.get_filesets()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.get_measures" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.get_measures()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.get_metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.get_metadata()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.list_filesets" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.list_filesets()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.path" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.path()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.set_metadata" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.set_metadata()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.Scan.store" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">Scan.store()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#plantdb.fsdb.dummy_db" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">dummy_db()</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../_sources/reference/fsdb.md.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="local-file-system-database">
<h1 id="reference-fsdb--page-root">Local file system database<a class="headerlink" href="#reference-fsdb--page-root" title="Permalink to this heading">¶</a></h1>
<p>Implementation of a database as a local file structure.</p>
<p>Assuming that the <code class="docutils literal notranslate"><span class="pre">FSDB</span></code> root database directory is <code class="docutils literal notranslate"><span class="pre">dbroot/</span></code>, there is a <code class="docutils literal notranslate"><span class="pre">Scan</span></code> with <code class="docutils literal notranslate"><span class="pre">'myscan_001'</span></code> as <code class="docutils literal notranslate"><span class="pre">Scan.id</span></code> and there are some metadata (see below), you should have the following file structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dbroot/                            # base directory of the database
├── myscan_001/                    # scan dataset directory, id=`myscan_001`
│   ├── files.json                 # JSON file referencing the all files for the dataset
│   ├── images/                    # `Fileset` gathering the 'images'
│   │   ├── scan_img_01.jpg        # 'image' `File` 01
│   │   ├── scan_img_02.jpg        # 'image' `File` 02
│   │   ├── [...]                  #
│   │   └── scan_img_99.jpg        # 'image' `File` 99
│   ├── metadata/                  # metadata directory
│   │   ├── images                 # 'images' metadata directory
│   │   │   ├── scan_img_01.json   # JSON metadata attached to this file
│   │   │   ├── scan_img_02.json   #
│   │   │   [...]                  #
│   │   │   └── scan_img_99.json   #
│   │   ├── Task_A/                # optional, only present if metadata attached to one of the outputs from `Task_A`
│   │   │   └── outfile.json       # optional metadata attached to the output file from `Task_A`
│   │   └── (metadata.json)        # optional metadata attached to the dataset
│   ├── task_A/                    # `Fileset` gathering the outputs of `Task_A`
│   │   └── outfile.ext            # output file from `Task_A`
│   └── (measures.json)            # optional manual measurements file
├── myscan_002/                    # scan dataset directory, id=`myscan_002`
:
├── (LOCK_FILE_NAME)               # "lock file", present if DB is connected
└── MARKER_FILE_NAME               # ROMI DB marker file
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">myscan_001/files.json</span></code> file then contains the following structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
    "filesets": [
        {
            "id": "images",
            "files": [
                {
                    "id": "scan_img_01",
                    "file": "scan_img_01.jpg"
                },
                {
                    "id": "scan_img_02",
                    "file": "scan_img_02.jpg"
                },
                [...]
                {
                    "id": "scan_img_99",
                    "file": "scan_img_99.jpg"
                }
            ]
        }
    ]
}
</pre></div>
</div>
<p>The metadata of the scan (<code class="docutils literal notranslate"><span class="pre">metadata.json</span></code>), of the set of ‘images’ files (<code class="docutils literal notranslate"><span class="pre">&lt;Fileset.id&gt;.json</span></code>) and of each ‘image’ files (<code class="docutils literal notranslate"><span class="pre">&lt;File.id&gt;.json</span></code>) are all stored as JSON files in a separate directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">metadata</span><span class="o">.</span><span class="n">json</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">images</span><span class="o">.</span><span class="n">json</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">scan_img_01</span><span class="o">.</span><span class="n">json</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">scan_img_02</span><span class="o">.</span><span class="n">json</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">scan_img_99</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<section id="classes">
<h2 id="classes">Classes<a class="headerlink" href="#classes" title="Permalink to this heading">¶</a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#plantdb.fsdb.FSDB" title="plantdb.fsdb.FSDB"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FSDB</span></code></a>(basedir)</p></td>
<td><p>Implement a local <em>File System DataBase</em> version of abstract class <code class="docutils literal notranslate"><span class="pre">db.DB</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#plantdb.fsdb.Scan" title="plantdb.fsdb.Scan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Scan</span></code></a>(db, id)</p></td>
<td><p>Implement <code class="docutils literal notranslate"><span class="pre">Scan</span></code> for the local <em>File System DataBase</em> from abstract class <code class="docutils literal notranslate"><span class="pre">db.Scan</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#plantdb.fsdb.Fileset" title="plantdb.fsdb.Fileset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Fileset</span></code></a>(db, scan, id)</p></td>
<td><p>Implement <code class="docutils literal notranslate"><span class="pre">Fileset</span></code> for the local <em>File System DataBase</em> from abstract class <code class="docutils literal notranslate"><span class="pre">db.Fileset</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#plantdb.fsdb.File" title="plantdb.fsdb.File"><code class="xref py py-obj docutils literal notranslate"><span class="pre">File</span></code></a>(db, fileset, id)</p></td>
<td><p>Implement <code class="docutils literal notranslate"><span class="pre">File</span></code> for the local <em>File System DataBase</em> from abstract class <code class="docutils literal notranslate"><span class="pre">db.File</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="methods">
<h2 id="methods">Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#plantdb.fsdb.dummy_db" title="plantdb.fsdb.dummy_db"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dummy_db</span></code></a>([with_scan, with_fileset, with_file])</p></td>
<td><p>Create a dummy temporary database.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-plantdb.fsdb">
<span id="details"></span><h2 id="module-plantdb.fsdb">Details<a class="headerlink" href="#module-plantdb.fsdb" title="Permalink to this heading">¶</a></h2>
<p>Implementation of a database as a local file structure.</p>
<p>Assuming that the <code class="docutils literal notranslate"><span class="pre">FSDB</span></code> root database directory is <code class="docutils literal notranslate"><span class="pre">dbroot/</span></code>, there is a <code class="docutils literal notranslate"><span class="pre">Scan</span></code> with <code class="docutils literal notranslate"><span class="pre">'myscan_001'</span></code> as <code class="docutils literal notranslate"><span class="pre">Scan.id</span></code> and there are some metadata (see below), you should have the following file structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dbroot/                            # base directory of the database
├── myscan_001/                    # scan dataset directory, id=`myscan_001`
│   ├── files.json                 # JSON file referencing the all files for the dataset
│   ├── images/                    # `Fileset` gathering the 'images'
│   │   ├── scan_img_01.jpg        # 'image' `File` 01
│   │   ├── scan_img_02.jpg        # 'image' `File` 02
│   │   ├── [...]                  #
│   │   └── scan_img_99.jpg        # 'image' `File` 99
│   ├── metadata/                  # metadata directory
│   │   ├── images                 # 'images' metadata directory
│   │   │   ├── scan_img_01.json   # JSON metadata attached to this file
│   │   │   ├── scan_img_02.json   #
│   │   │   [...]                  #
│   │   │   └── scan_img_99.json   #
│   │   ├── Task_A/                # optional, only present if metadata attached to one of the outputs from `Task_A`
│   │   │   └── outfile.json       # optional metadata attached to the output file from `Task_A`
│   │   └── (metadata.json)        # optional metadata attached to the dataset
│   ├── task_A/                    # `Fileset` gathering the outputs of `Task_A`
│   │   └── outfile.ext            # output file from `Task_A`
│   └── (measures.json)            # optional manual measurements file
├── myscan_002/                    # scan dataset directory, id=`myscan_002`
:
├── (LOCK_FILE_NAME)               # "lock file", present if DB is connected
└── MARKER_FILE_NAME               # ROMI DB marker file
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">myscan_001/files.json</span></code> file then contains the following structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
    "filesets": [
        {
            "id": "images",
            "files": [
                {
                    "id": "scan_img_01",
                    "file": "scan_img_01.jpg"
                },
                {
                    "id": "scan_img_02",
                    "file": "scan_img_02.jpg"
                },
                [...]
                {
                    "id": "scan_img_99",
                    "file": "scan_img_99.jpg"
                }
            ]
        }
    ]
}
</pre></div>
</div>
<p>The metadata of the scan (<code class="docutils literal notranslate"><span class="pre">metadata.json</span></code>), of the set of ‘images’ files (<code class="docutils literal notranslate"><span class="pre">&lt;Fileset.id&gt;.json</span></code>) and of each ‘image’ files (<code class="docutils literal notranslate"><span class="pre">&lt;File.id&gt;.json</span></code>) are all stored as JSON files in a separate directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">metadata</span><span class="o">.</span><span class="n">json</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">images</span><span class="o">.</span><span class="n">json</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">scan_img_01</span><span class="o">.</span><span class="n">json</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">scan_img_02</span><span class="o">.</span><span class="n">json</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">myscan_001</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">scan_img_99</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">FSDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basedir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement a local <em>File System DataBase</em> version of abstract class <code class="docutils literal notranslate"><span class="pre">db.DB</span></code>.</p>
<dl class="simple">
<dt>Implement as a simple local file structure with following directory structure and marker files:</dt><dd><ul class="simple">
<li><p>directory <code class="docutils literal notranslate"><span class="pre">${FSDB.basedir}</span></code> as database root directory;</p></li>
<li><p>marker file <code class="docutils literal notranslate"><span class="pre">MARKER_FILE_NAME</span></code> at database root directory;</p></li>
<li><p>(OPTIONAL) lock file <code class="docutils literal notranslate"><span class="pre">LOCK_FILE_NAME</span></code> at database root directory when connected;</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.basedir">
<span class="sig-name descname"><span class="pre">basedir</span></span><a class="headerlink" href="#plantdb.fsdb.FSDB.basedir" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path to the base directory hosting the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.lock_path">
<span class="sig-name descname"><span class="pre">lock_path</span></span><a class="headerlink" href="#plantdb.fsdb.FSDB.lock_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path to the lock file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.scans">
<span class="sig-name descname"><span class="pre">scans</span></span><a class="headerlink" href="#plantdb.fsdb.FSDB.scans" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of <code class="docutils literal notranslate"><span class="pre">Scan</span></code> objects found in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)">list</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.is_connected">
<span class="sig-name descname"><span class="pre">is_connected</span></span><a class="headerlink" href="#plantdb.fsdb.FSDB.is_connected" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the database is connected (locked directory), else <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)">bool</a></p>
</dd>
</dl>
</dd></dl>
<p class="rubric">Notes</p>
<p>Requires the marker file <code class="docutils literal notranslate"><span class="pre">MARKER_FILE_NAME</span></code> at the given <code class="docutils literal notranslate"><span class="pre">basedir</span></code>.
Lock file <code class="docutils literal notranslate"><span class="pre">LOCK_FILE_NAME</span></code> is found only when connecting an FSBD instance to the given <code class="docutils literal notranslate"><span class="pre">basedir</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="db.html#plantdb.db.DB" title="plantdb.db.DB"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.db.DB</span></code></a>, <a class="reference internal" href="#plantdb.fsdb.MARKER_FILE_NAME" title="plantdb.fsdb.MARKER_FILE_NAME"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb.MARKER_FILE_NAME</span></code></a>, <a class="reference internal" href="#plantdb.fsdb.LOCK_FILE_NAME" title="plantdb.fsdb.LOCK_FILE_NAME"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb.LOCK_FILE_NAME</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># EXAMPLE 1: Use a temporary dummy local database:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">db</span><span class="p">))</span>
<span class="go">&lt;class 'plantdb.fsdb.FSDB'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>
<span class="go">/tmp/romidb_********</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Now connecting to this dummy local database...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ...allows creating new `Scan` in it:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">create_scan</span><span class="p">(</span><span class="s2">"007"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">new_scan</span><span class="p">))</span>
<span class="go">&lt;class 'plantdb.fsdb.Scan'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># EXAMPLE 2: Use a local database:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">FSDB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">FSDB</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'ROMI_DB'</span><span class="p">,</span> <span class="s2">"/data/ROMI/DB/"</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">scan</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">scan</span> <span class="ow">in</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scans</span><span class="p">()]</span>  <span class="c1"># list scan ids found in database</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scans</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">fs</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">fs</span> <span class="ow">in</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_filesets</span><span class="p">()]</span>  <span class="c1"># list fileset ids found in scan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">login_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the local database.</p>
<p>Handle DB “locking” system by adding a <cite>LOCK_FILE_NAME</cite> file in the DB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>login_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – UNUSED</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IOError" title="(in Python v3.12)"><strong>IOError</strong></a> – If the given <cite>basedir</cite> is not an existing directory.
    If the <cite>MARKER_FILE_NAME</cite> is missing from the <cite>basedir</cite>.</p></li>
<li><p><a class="reference internal" href="db.html#plantdb.db.DBBusyError" title="plantdb.db.DBBusyError"><strong>DBBusyError</strong></a> – If the <cite>LOCK_FILE_NAME</cite> lock fil is found in the <cite>basedir</cite>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#plantdb.fsdb.MARKER_FILE_NAME" title="plantdb.fsdb.MARKER_FILE_NAME"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb.MARKER_FILE_NAME</span></code></a>, <a class="reference internal" href="#plantdb.fsdb.LOCK_FILE_NAME" title="plantdb.fsdb.LOCK_FILE_NAME"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb.LOCK_FILE_NAME</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">FSDB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.create_scan">
<span class="sig-name descname"><span class="pre">create_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB.create_scan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB.create_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <cite>Scan</cite> instance in the local database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The name of the scan to create. It should not exist in the local database.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>plantdb.fsdb.Scan</em> – The <cite>Scan</cite> instance created in the local database.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IOError" title="(in Python v3.12)"><strong>IOError</strong></a> – If the <cite>id</cite> already exists in the local database.
    If the <cite>id</cite> is not valid.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb._is_valid_id</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb._make_scan</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">create_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">create_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">)</span>
<span class="go">OSError: Duplicate scan name: 007</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.delete_scan">
<span class="sig-name descname"><span class="pre">delete_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB.delete_scan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB.delete_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an existing <cite>Scan</cite> from the local database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The name of the scan to create. It should exist in the local database.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IOError" title="(in Python v3.12)"><strong>IOError</strong></a> – If the <cite>id</cite> do not exist in the local database.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb._delete_scan</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">FSDB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">create_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_scan</span><span class="p">)</span>
<span class="go">&lt;plantdb.fsdb.Scan object at 0x7f0730b1e390&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">delete_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">scan</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">delete_scan</span><span class="p">(</span><span class="s1">'008'</span><span class="p">)</span>
<span class="go">OSError: Invalid id</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnect from the local database.</p>
<p>Handle DB “locking” system by removing the <cite>LOCK_FILE_NAME</cite> file from the DB.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IOError" title="(in Python v3.12)"><strong>IOError</strong></a> – If the <cite>LOCK_FILE_NAME</cite> cannot be removed using the <code class="docutils literal notranslate"><span class="pre">lock_path</span></code> attribute.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.get_scan">
<span class="sig-name descname"><span class="pre">get_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB.get_scan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB.get_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Get or create a <cite>Scan</cite> instance in the local database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The name of the scan dataset to get/create.
It should exist if <cite>create</cite> is <cite>False</cite>.</p></li>
<li><p><strong>create</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">False</span></code> (default), the given <cite>id</cite> should exist in the local database.
Else the given <cite>id</cite> should NOT exist as they are unique.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If the <cite>id</cite> do not exist in the local database and <cite>create</cite> is <cite>False</cite>, <cite>None</cite> is returned.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">list_scans</span><span class="p">()</span>
<span class="go">['myscan_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_scan</span><span class="p">)</span>
<span class="go">&lt;plantdb.fsdb.Scan object at **************&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">list_scans</span><span class="p">()</span>
<span class="go">['myscan_001', '007']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unknown_scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'unknown'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">unknown_scan</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.get_scans">
<span class="sig-name descname"><span class="pre">get_scans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB.get_scans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB.get_scans" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of <cite>Scan</cite> instances defined in the local database, possibly filtered using a <cite>query</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><em>dict</em></a><em>, </em><em>optional</em>) – Query to use to get a list of scans.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>list of plantdb.fsdb.Scan</em> – List of <cite>Scan`s, filtered by the `query</cite> if any.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb._filter_query</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">get_scans</span><span class="p">()</span>
<span class="go">[&lt;plantdb.fsdb.Scan at *x************&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.list_scans">
<span class="sig-name descname"><span class="pre">list_scans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB.list_scans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB.list_scans" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of scans in the local database.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_scan</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">list_scans</span><span class="p">()</span>
<span class="go">['myscan_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.FSDB.path">
<span class="sig-name descname"><span class="pre">path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><span class="pre">Path</span></a></span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FSDB.path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FSDB.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path to the local database root directory.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_scan</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="plantdb.fsdb.File">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">File</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement <code class="docutils literal notranslate"><span class="pre">File</span></code> for the local <em>File System DataBase</em> from abstract class <code class="docutils literal notranslate"><span class="pre">db.File</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.File.db">
<span class="sig-name descname"><span class="pre">db</span></span><a class="headerlink" href="#plantdb.fsdb.File.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Database where to find the scan</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#plantdb.fsdb.FSDB" title="plantdb.fsdb.FSDB">plantdb.fsdb.FSDB</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.File.fileset">
<span class="sig-name descname"><span class="pre">fileset</span></span><a class="headerlink" href="#plantdb.fsdb.File.fileset" title="Permalink to this definition">¶</a></dt>
<dd><p>Set of files containing the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#plantdb.fsdb.Fileset" title="plantdb.fsdb.Fileset">plantdb.fsdb.Fileset</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.File.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#plantdb.fsdb.File.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the file in the <code class="docutils literal notranslate"><span class="pre">FSDB</span></code> local database.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">str</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.File.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><a class="headerlink" href="#plantdb.fsdb.File.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>File name.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">str</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.File.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#plantdb.fsdb.File.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of metadata attached to the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">dict</a></p>
</dd>
</dl>
</dd></dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="db.html#plantdb.db.File" title="plantdb.db.File"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.db.File</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p><cite>File</cite> must be writen using <code class="docutils literal notranslate"><span class="pre">write_raw</span></code> or <code class="docutils literal notranslate"><span class="pre">write</span></code> methods to exist on disk.
Else they are just referenced in the database!</p>
<p>Contrary to other classes (<code class="docutils literal notranslate"><span class="pre">Scan</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">Fileset</span></code>) the uniqueness is not checked!</p>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.get_metadata">
<span class="sig-name descname"><span class="pre">get_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.get_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metadata associated to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – A key that should exist in the file’s metadata.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>any</em> – If <cite>key</cite> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, returns a dictionary.
Else, returns the value attached to this key.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">_file_metadata_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s2">"test_json"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">())</span>
<span class="go">{'random json': True}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.import_file">
<span class="sig-name descname"><span class="pre">import_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.import_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.import_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Import the file from its local path to the current fileset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><em>pathlib.Path</em></a>) – The path to the file to import.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">_file_metadata_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s2">"test_json"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_file</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="s1">'test_json2'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_file</span><span class="o">.</span><span class="n">import_file</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_file</span><span class="o">.</span><span class="n">path</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.path">
<span class="sig-name descname"><span class="pre">path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><span class="pre">Path</span></a></span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path to the local file.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_scan</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">list_files</span><span class="p">()</span>
<span class="go">['dummy_image', 'test_image', 'test_json']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s1">'dummy_image'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">path</span><span class="p">()</span>  <span class="c1"># should be '/tmp/romidb_********/myscan_001/fileset_001/dummy_image.png'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the file and return its contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>str</em> – The contents of the file.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s2">"test_json"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">js</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">js</span><span class="p">)</span>  <span class="c1"># print the content of the file</span>
<span class="go">{</span>
<span class="go">    "Who you gonna call?": "Ghostbuster"</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Convert this raw json into a dictionary with dedicated method from `json` library:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">js_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">js</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">js_dict</span><span class="p">)</span>
<span class="go">{'Who you gonna call?': 'Ghostbuster'}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">js_dict</span><span class="p">))</span>
<span class="go">&lt;class 'dict'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.read_raw">
<span class="sig-name descname"><span class="pre">read_raw</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.read_raw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.read_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the file and return its contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>bytes</em> – The contents of the file.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s2">"test_json"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">js</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read_raw</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">js</span><span class="p">)</span>  <span class="c1"># print the raw bytes content</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Convert this raw json into a dictionary with dedicated method from `json` library:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">js_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">js</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">js_dict</span><span class="p">)</span>
<span class="go">{'Who you gonna call?': 'Ghostbuster'}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">js_dict</span><span class="p">))</span>
<span class="go">&lt;class 'dict'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.set_metadata">
<span class="sig-name descname"><span class="pre">set_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.set_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.set_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new metadata to the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><em>dict</em></a>) – If a string, a key to address the <cite>value</cite>.
If a dictionary, update the metadata dictionary with <cite>data</cite> (<cite>value</cite> is then unused).</p></li>
<li><p><strong>value</strong> (<em>any</em><em>, </em><em>optional</em>) – The value to assign to <cite>data</cite> if the latest is not a dictionary.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">_file_metadata_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s2">"test_json"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file</span><span class="o">.</span><span class="n">set_metadata</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">_file_metadata_path</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">'r'</span><span class="p">)))</span>
<span class="go">{'random json': True, 'test': 'value'}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.store">
<span class="sig-name descname"><span class="pre">store</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Save changes to the scan main JSON FILE (files.json).</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a file from data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – A string representation of the content to write.</p></li>
<li><p><strong>ext</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – The extension to use to save the file.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="s1">'file_007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">md</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Bond, James Bond"</span><span class="p">}</span>  <span class="c1"># Create an example dictionary to save as JSON</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">md</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">{"Name": "Bond, James Bond"}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="go">&lt;class 'str'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>
<span class="go">['file_007.json', 'test_image.png', 'test_json.json', 'dummy_image.png']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.File.write_raw">
<span class="sig-name descname"><span class="pre">write_raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#File.write_raw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.File.write_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a file from raw byte data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><em>bytes</em></a>) – The raw byte content to write.</p></li>
<li><p><strong>ext</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – The extension to use to save the file.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="s1">'file_007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">md</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Bond, James Bond"</span><span class="p">}</span>  <span class="c1"># Create an example dictionary to save as JSON</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">md</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">b'{"Name": "Bond, James Bond"}'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_f</span><span class="o">.</span><span class="n">write_raw</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>
<span class="go">['file_007.json', 'test_image.png', 'test_json.json', 'dummy_image.png']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="plantdb.fsdb.FileNoFileNameError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">FileNoFileNameError</span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FileNoFileNameError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FileNoFileNameError" title="Permalink to this definition">¶</a></dt>
<dd><p>No ‘file’ entry could be found for this file.</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="plantdb.fsdb.FileNoIDError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">FileNoIDError</span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FileNoIDError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FileNoIDError" title="Permalink to this definition">¶</a></dt>
<dd><p>No ‘id’ entry could be found for this file.</p>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">Fileset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement <code class="docutils literal notranslate"><span class="pre">Fileset</span></code> for the local <em>File System DataBase</em> from abstract class <code class="docutils literal notranslate"><span class="pre">db.Fileset</span></code>.</p>
<dl class="simple">
<dt>Implementation of a fileset as a simple files structure with:</dt><dd><ul class="simple">
<li><p>directory <code class="docutils literal notranslate"><span class="pre">${FSDB.basedir}/${FSDB.scan.id}/${Fileset.id}</span></code> containing set of files;</p></li>
<li><p>directory <code class="docutils literal notranslate"><span class="pre">${FSDB.basedir}/${FSDB.scan.id}/metadata</span></code> containing JSON metadata associated to files;</p></li>
<li><p>JSON file <code class="docutils literal notranslate"><span class="pre">files.json</span></code> containing the list of files from fileset;</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.db">
<span class="sig-name descname"><span class="pre">db</span></span><a class="headerlink" href="#plantdb.fsdb.Fileset.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Database where to find the <cite>scan</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#plantdb.fsdb.FSDB" title="plantdb.fsdb.FSDB">plantdb.fsdb.FSDB</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#plantdb.fsdb.Fileset.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the scan in the database <cite>db</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">str</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.scan">
<span class="sig-name descname"><span class="pre">scan</span></span><a class="headerlink" href="#plantdb.fsdb.Fileset.scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan containing the set of files of interest.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#plantdb.fsdb.Scan" title="plantdb.fsdb.Scan">plantdb.fsdb.Scan</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#plantdb.fsdb.Fileset.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of metadata attached to the fileset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">dict</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.files">
<span class="sig-name descname"><span class="pre">files</span></span><a class="headerlink" href="#plantdb.fsdb.Fileset.files" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <cite>File</cite> objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)">list</a> of <a class="reference internal" href="#plantdb.fsdb.File" title="plantdb.fsdb.File">plantdb.fsdb.File</a></p>
</dd>
</dl>
</dd></dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="db.html#plantdb.db.Fileset" title="plantdb.db.Fileset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.db.Fileset</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.create_file">
<span class="sig-name descname"><span class="pre">create_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.create_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.create_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <cite>File</cite> instance in the local database attached to the current <cite>Fileset</cite> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The name of the file to create.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>plantdb.fsdb.File</em> – The <cite>File</cite> instance created in the current <cite>Fileset</cite> instance.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'myscan_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">list_files</span><span class="p">()</span>
<span class="go">['dummy_image', 'test_image', 'test_json']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="s1">'file_007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">list_files</span><span class="p">()</span>
<span class="go">['dummy_image', 'test_image', 'test_json', 'file_007']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>  <span class="c1"># the file only exist in the database, not on drive!</span>
<span class="go">['test_image.png', 'test_json.json', 'dummy_image.png']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">md</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Bond, James Bond"</span><span class="p">}</span>  <span class="c1"># Create an example dictionary to save as JSON</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb</span> <span class="kn">import</span> <span class="n">io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">io</span><span class="o">.</span><span class="n">write_json</span><span class="p">(</span><span class="n">new_f</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="s2">"json"</span><span class="p">)</span>  <span class="c1"># write the file on drive</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>
<span class="go">['file_007.json', 'test_image.png', 'test_json.json', 'dummy_image.png']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.delete_file">
<span class="sig-name descname"><span class="pre">delete_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.delete_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.delete_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a given file from the current fileset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fileset_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Name of the file to delete.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'myscan_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">list_files</span><span class="p">()</span>
<span class="go">['dummy_image', 'test_image', 'test_json']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="s1">'dummy_image'</span><span class="p">)</span>
<span class="go">delete /tmp/romidb_********/myscan_001/fileset_001/dummy_image.png</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">list_files</span><span class="p">()</span>
<span class="go">['test_image', 'test_json']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">path</span><span class="p">()</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span>  <span class="c1"># the file has been removed from the drive and the database</span>
<span class="go">['test_image.png', 'test_json.json']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.get_file">
<span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.get_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.get_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Get or create a <cite>File</cite> instance, of given <cite>id</cite>, in the current fileset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Name of the file to get/create.</p></li>
<li><p><strong>create</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">False</span></code> (default), the given <cite>id</cite> should exist in the local database.
Else the given <cite>id</cite> should NOT exist as they are unique.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>plantdb.fsdb.File</em> – The retrieved or created file.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s2">"test_image"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># To read the file you need to load the right reader from plantdb.io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.io</span> <span class="kn">import</span> <span class="n">read_image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">read_image</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.get_files">
<span class="sig-name descname"><span class="pre">get_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.get_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.get_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of <cite>File</cite> instances defined in the current fileset, possibly filtered using a <cite>query</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><em>dict</em></a><em>, </em><em>optional</em>) – Query to use to get a list of files.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>list of plantdb.fsdb.File</em> – List of <a href="#id1"><span class="problematic" id="id2">`</span></a>File`s, filtered by the query if any.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb._filter_query</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'myscan_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">get_files</span><span class="p">()</span>
<span class="go">[&lt;plantdb.fsdb.File at *x************&gt;,</span>
<span class="go"> &lt;plantdb.fsdb.File at *x************&gt;,</span>
<span class="go"> &lt;plantdb.fsdb.File at *x************&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.get_metadata">
<span class="sig-name descname"><span class="pre">get_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.get_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metadata associated to a fileset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – A key that should exist in the fileset’s metadata.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>any</em> – If <cite>key</cite> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, returns a dictionary.
Else, returns the value attached to this key.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">set_metadata</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s2">"test"</span><span class="p">))</span>
<span class="go">'value'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s2">"test"</span><span class="p">))</span>
<span class="go">'value'</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.list_files">
<span class="sig-name descname"><span class="pre">list_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.list_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.list_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of files in the fileset.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_scan</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">list_files</span><span class="p">()</span>
<span class="go">['dummy_image', 'test_image', 'test_json']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.path">
<span class="sig-name descname"><span class="pre">path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><span class="pre">Path</span></a></span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path to the local fileset.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_scan</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">scan</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">scan</span> <span class="ow">in</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scans</span><span class="p">()]</span>  <span class="c1"># list scan ids found in database</span>
<span class="go">['myscan_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">scan</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>  <span class="c1"># should be '/tmp/romidb_********/myscan_001'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">fs</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">fs</span> <span class="ow">in</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_filesets</span><span class="p">()]</span>  <span class="c1"># list fileset ids found in scan</span>
<span class="go">['fileset_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>  <span class="c1"># should be '/tmp/romidb_********/myscan_001/fileset_001'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.set_metadata">
<span class="sig-name descname"><span class="pre">set_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.set_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.set_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new metadata to the fileset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><em>dict</em></a>) – If a string, a key to address the <cite>value</cite>.
If a dictionary, update the metadata dictionary with <cite>data</cite> (<cite>value</cite> is then unused).</p></li>
<li><p><strong>value</strong> (<em>any</em><em>, </em><em>optional</em>) – The value to assign to <cite>data</cite> if the latest is not a dictionary.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">_fileset_metadata_json_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">set_metadata</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">_fileset_metadata_json_path</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">'r'</span><span class="p">)))</span>
<span class="go">{'test': 'value'}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Fileset.store">
<span class="sig-name descname"><span class="pre">store</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Fileset.store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Fileset.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Save changes to the scan main JSON FILE (files.json).</p>
</dd></dl>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="plantdb.fsdb.FilesetNoIDError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">FilesetNoIDError</span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FilesetNoIDError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FilesetNoIDError" title="Permalink to this definition">¶</a></dt>
<dd><p>No ‘id’ entry could be found for this fileset.</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="plantdb.fsdb.FilesetNotFoundError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">FilesetNotFoundError</span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#FilesetNotFoundError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.FilesetNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Could not find the fileset directory.</p>
</dd></dl>
<dl class="py data">
<dt class="sig sig-object py" id="plantdb.fsdb.LOCK_FILE_NAME">
<span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">LOCK_FILE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'lock'</span></em><a class="headerlink" href="#plantdb.fsdb.LOCK_FILE_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>This file prevents opening the DB if it is present in the root folder of a DB</p>
</dd></dl>
<dl class="py data">
<dt class="sig sig-object py" id="plantdb.fsdb.MARKER_FILE_NAME">
<span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">MARKER_FILE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'romidb'</span></em><a class="headerlink" href="#plantdb.fsdb.MARKER_FILE_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>This file must exist in the root of a folder for it to be considered a valid DB</p>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">Scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement <code class="docutils literal notranslate"><span class="pre">Scan</span></code> for the local <em>File System DataBase</em> from abstract class <code class="docutils literal notranslate"><span class="pre">db.Scan</span></code>.</p>
<dl class="simple">
<dt>Implementation of a scan as a simple file structure with:</dt><dd><ul class="simple">
<li><p>directory <code class="docutils literal notranslate"><span class="pre">${Scan.db.basedir}/${Scan.db.id}</span></code> as scan root directory;</p></li>
<li><p>(OPTIONAL) directory <code class="docutils literal notranslate"><span class="pre">${Scan.db.basedir}/${Scan.db.id}/metadata</span></code> containing JSON metadata file</p></li>
<li><p>(OPTIONAL) JSON file <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> with Scan metadata</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.db">
<span class="sig-name descname"><span class="pre">db</span></span><a class="headerlink" href="#plantdb.fsdb.Scan.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Database where to find the scan.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#plantdb.fsdb.FSDB" title="plantdb.fsdb.FSDB">plantdb.fsdb.FSDB</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#plantdb.fsdb.Scan.id" title="Permalink to this definition">¶</a></dt>
<dd><p>The scan unique name in the local database.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">str</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#plantdb.fsdb.Scan.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of metadata attached to the scan.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">dict</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.filesets">
<span class="sig-name descname"><span class="pre">filesets</span></span><a class="headerlink" href="#plantdb.fsdb.Scan.filesets" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <code class="docutils literal notranslate"><span class="pre">Fileset</span></code> objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)">list</a> of <a class="reference internal" href="#plantdb.fsdb.Fileset" title="plantdb.fsdb.Fileset">plantdb.fsdb.Fileset</a></p>
</dd>
</dl>
</dd></dl>
<p class="rubric">Notes</p>
<p>Optional directory <code class="docutils literal notranslate"><span class="pre">metadata</span></code> &amp; JSON file <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> are found when using method <code class="docutils literal notranslate"><span class="pre">set_metadata()</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="db.html#plantdb.db.Scan" title="plantdb.db.Scan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.db.Scan</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">Scan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example #1: Initialize a `Scan` object using an `FSBD` object:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">Scan</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s1">'007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">scan</span><span class="p">))</span>
<span class="go">&lt;class 'plantdb.fsdb.Scan'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">scan</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>  <span class="c1"># the obtained path should be different as the path to the created `dummy_db` change...</span>
<span class="go">/tmp/romidb_j0pbkoo0/007</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">))</span>  <span class="c1"># Note that it did NOT create this `Scan` in the database!</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">()))</span>  <span class="c1"># And it is NOT found under the `basedir` directory</span>
<span class="go">['romidb']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># HOWEVER if you add metadata to the `Scan` object:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">set_metadata</span><span class="p">({</span><span class="s1">'Name'</span><span class="p">:</span> <span class="s2">"Bond... James Bond!"</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">scan</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
<span class="go">{'Name': 'Bond... James Bond!'}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">))</span>  <span class="c1"># The `Scan` is still not found in the database!</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">()))</span>  <span class="c1"># BUT it is now found under the `basedir` directory</span>
<span class="go">['007', 'romidb']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">(),</span> <span class="n">scan</span><span class="o">.</span><span class="n">id</span><span class="p">)))</span>  <span class="c1"># Same goes for the metadata</span>
<span class="go">['metadata']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">(),</span> <span class="n">scan</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s2">"metadata"</span><span class="p">)))</span>  <span class="c1"># Same goes for the metadata</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example #2: Get it from an `FSDB` object:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">scan</span><span class="p">))</span>
<span class="go">&lt;class 'plantdb.fsdb.Scan'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">))</span>  <span class="c1"># This time the `Scan` object is found in the `FSBD`</span>
<span class="go">&lt;plantdb.fsdb.Scan object at 0x7f34fc860fd0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">()))</span>  <span class="c1"># And it is found under the `basedir` directory</span>
<span class="go">['007', 'romidb']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">(),</span> <span class="n">scan</span><span class="o">.</span><span class="n">id</span><span class="p">)))</span>  <span class="c1"># Same goes for the metadata</span>
<span class="go">['metadata']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># When reconnecting to db, if created scan is EMPTY (no Fileset &amp; File) it is not found!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'007'</span><span class="p">))</span>
<span class="go">None</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.create_fileset">
<span class="sig-name descname"><span class="pre">create_fileset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.create_fileset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.create_fileset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <cite>Fileset</cite> instance in the local database attached to the current <cite>Scan</cite> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The name of the fileset to create. It should not exist in the current <cite>Scan</cite> instance.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>plantdb.fsdb.Fileset</em> – The <cite>Fileset</cite> instance created in the current <cite>Scan</cite> instance.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IOError" title="(in Python v3.12)"><strong>IOError</strong></a> – If the <cite>id</cite> already exists in the current <cite>Scan</cite> instance.
    If the <cite>id</cite> is not valid.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb._is_valid_id</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb._make_fileset</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'myscan_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">list_filesets</span><span class="p">()</span>
<span class="go">['fileset_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">create_fileset</span><span class="p">(</span><span class="s1">'fs_007'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">list_filesets</span><span class="p">()</span>
<span class="go">['fileset_001', 'fs_007']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrong_fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">create_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="go">OSError: Duplicate scan name: fileset_001</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.delete_fileset">
<span class="sig-name descname"><span class="pre">delete_fileset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileset_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.delete_fileset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.delete_fileset" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a given fileset from the scan dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fileset_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Name of the fileset to delete.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'myscan_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">list_filesets</span><span class="p">()</span>
<span class="go">['fileset_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">delete_fileset</span><span class="p">(</span><span class="s1">'fileset_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">list_filesets</span><span class="p">()</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.get_fileset">
<span class="sig-name descname"><span class="pre">get_fileset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.get_fileset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.get_fileset" title="Permalink to this definition">¶</a></dt>
<dd><p>Get or create a <cite>Fileset</cite> instance, of given <cite>id</cite>, in the current scan dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – The name of the fileset to get/create.
It should exist if <cite>create</cite> is <cite>False</cite>.</p></li>
<li><p><strong>create</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">False</span></code> (default), the given <cite>id</cite> should exist in the local database.
Else the given <cite>id</cite> should NOT exist as they are unique.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Fileset</em> – The retrieved or created fileset.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If the <cite>id</cite> do not exist in the local database and <cite>create</cite> is <cite>False</cite>, <cite>None</cite> is returned.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'myscan_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">list_filesets</span><span class="p">()</span>
<span class="go">['fileset_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_fileset</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'007'</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_fileset</span><span class="p">)</span>
<span class="go">&lt;plantdb.fsdb.Fileset object at **************&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">list_filesets</span><span class="p">()</span>
<span class="go">['fileset_001', '007']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unknown_fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s1">'unknown'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">unknown_fs</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.get_filesets">
<span class="sig-name descname"><span class="pre">get_filesets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.get_filesets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.get_filesets" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of <cite>Fileset</cite> instances defined in the current scan dataset, possibly filtered using a <cite>query</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><em>dict</em></a><em>, </em><em>optional</em>) – Query to use to get a list of filesets.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>list of plantdb.fsdb.Fileset</em> – List of <cite>Fileset`s, filtered by the `query</cite> if any.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plantdb.fsdb._filter_query</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s1">'myscan_001'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">get_filesets</span><span class="p">()</span>
<span class="go">[&lt;plantdb.fsdb.Fileset at *x************&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.get_measures">
<span class="sig-name descname"><span class="pre">get_measures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.get_measures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.get_measures" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the manual measurements associated to a scan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – A key that should exist in the scan’s manual measurements.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>any</em> – If <cite>key</cite> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, returns a dictionary.
Else, returns the value attached to this key.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>These manual measurements should be a JSON file named <cite>measures.json</cite>.
It is located at the root folder of the scan dataset.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.get_metadata">
<span class="sig-name descname"><span class="pre">get_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.get_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metadata associated to a scan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – A key that should exist in the scan’s metadata.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>any</em> – If <cite>key</cite> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, returns a dictionary.
Else, returns the value attached to this key.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.list_filesets">
<span class="sig-name descname"><span class="pre">list_filesets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.list_filesets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.list_filesets" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of filesets in the scan dataset.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">list_filesets</span><span class="p">()</span>
<span class="go">['fileset_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.path">
<span class="sig-name descname"><span class="pre">path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><span class="pre">Path</span></a></span></span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path to the local scan dataset.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">path</span><span class="p">()</span>  <span class="c1"># should be '/tmp/romidb_********/myscan_001'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.set_metadata">
<span class="sig-name descname"><span class="pre">set_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.set_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.set_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new metadata to the scan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><em>dict</em></a>) – If a string, a key to address the <cite>value</cite>.
If a dictionary, update the metadata dictionary with <cite>data</cite> (<cite>value</cite> is then unused).</p></li>
<li><p><strong>value</strong> (<em>any</em><em>, </em><em>optional</em>) – The value to assign to <cite>data</cite> if the latest is not a dictionary.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">_scan_metadata_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span><span class="o">.</span><span class="n">set_metadata</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">_scan_metadata_path</span><span class="p">(</span><span class="n">scan</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">'r'</span><span class="p">)))</span>
<span class="go">{'test': 'value'}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="plantdb.fsdb.Scan.store">
<span class="sig-name descname"><span class="pre">store</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#Scan.store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.Scan.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Save changes to the scan main JSON FILE (files.json).</p>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="plantdb.fsdb.dummy_db">
<span class="sig-prename descclassname"><span class="pre">plantdb.fsdb.</span></span><span class="sig-name descname"><span class="pre">dummy_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">with_scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_fileset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plantdb/fsdb.html#dummy_db"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#plantdb.fsdb.dummy_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dummy temporary database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>with_scan</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Add a dummy <code class="docutils literal notranslate"><span class="pre">Scan</span></code> to the dummy database.</p></li>
<li><p><strong>with_fileset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Add a dummy <code class="docutils literal notranslate"><span class="pre">Fileset</span></code> to the dummy database.</p></li>
<li><p><strong>with_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Add a dummy <code class="docutils literal notranslate"><span class="pre">File</span></code> to the dummy database.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>plantdb.fsdb.FSDB</em> – The dummy database.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">plantdb.fsdb</span> <span class="kn">import</span> <span class="n">dummy_db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>  <span class="c1"># the database directory</span>
<span class="go">/tmp/romidb_********</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_scan</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>  <span class="c1"># get the created scan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">scan</span><span class="p">))</span>
<span class="go">&lt;class 'NoneType'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="p">()))</span>
<span class="go">['lock', 'romidb', 'myscan_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">scan</span><span class="o">.</span><span class="n">path</span><span class="p">()))</span>
<span class="go">['metadata']</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_fileset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">scan</span><span class="o">.</span><span class="n">path</span><span class="p">()))</span>
<span class="go">['metadata', 'files.json', 'fileset_001']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">fs</span><span class="p">))</span>
<span class="go">&lt;class 'plantdb.fsdb.Fileset'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">path</span><span class="p">()</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()))</span>  <span class="c1"># the fileset is empty as no file has been created</span>
<span class="go">[]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">dummy_db</span><span class="p">(</span><span class="n">with_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scan</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_scan</span><span class="p">(</span><span class="s2">"myscan_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">get_fileset</span><span class="p">(</span><span class="s2">"fileset_001"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s2">"test_image"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">path</span><span class="p">()</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()))</span>
<span class="go">['test_image.png', 'test_json.json']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="db.html" title="Abstract database class"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> "Previous" </span> Abstract database class </span>
              </div>
            </a>
          
          
            <a href="autosummary/plantdb.fsdb.FSDB.html" title="plantdb.fsdb.FSDB"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> "Next" </span> plantdb.fsdb.FSDB </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2022, Robotics for Microfarms.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>